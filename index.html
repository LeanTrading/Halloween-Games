<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÉ Halloween Party Spiele üéÉ</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ============================================
           GLOBAL STYLES - APPLE DARK MODE
           ============================================ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Apple Dark Mode Colors */
            --bg-primary: #000000;
            --bg-secondary: #1c1c1e;
            --bg-tertiary: #2c2c2e;
            --bg-elevated: #3a3a3c;
            
            /* Halloween Accent Colors */
            --halloween-orange: #ff9500;
            --halloween-orange-glow: rgba(255, 149, 0, 0.4);
            --halloween-purple: #bf5af2;
            --halloween-purple-glow: rgba(191, 90, 242, 0.3);
            --halloween-green: #32d74b;
            
            /* Text Colors */
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.6);
            --text-tertiary: rgba(255, 255, 255, 0.4);
            
            /* System Colors */
            --separator: rgba(255, 255, 255, 0.1);
            --overlay: rgba(0, 0, 0, 0.5);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'SF Pro Display', system-ui, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            position: relative;
        }

        /* Animated Halloween Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, var(--halloween-purple-glow) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, var(--halloween-orange-glow) 0%, transparent 50%);
            opacity: 0.3;
            z-index: 0;
            pointer-events: none;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px;
            position: relative;
            z-index: 1;
        }

        /* ============================================
           HEADER & TITLE - APPLE GLASSMORPHISM
           ============================================ */
        .main-header {
            text-align: center;
            padding: 48px 32px;
            background: rgba(28, 28, 30, 0.8);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border-radius: 24px;
            margin-bottom: 32px;
            border: 1px solid var(--separator);
            box-shadow: 
                0 0 80px var(--halloween-orange-glow),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: headerGlow 4s ease-in-out infinite alternate;
            position: relative;
            overflow: hidden;
        }

        .main-header::before {
            content: 'üéÉ üëª üï∑Ô∏è ü¶á üï∏Ô∏è';
            position: absolute;
            top: -20px;
            left: 0;
            width: 200%;
            font-size: 2em;
            opacity: 0.1;
            animation: floatEmojis 20s linear infinite;
            white-space: nowrap;
        }

        @keyframes headerGlow {
            0% { box-shadow: 0 0 60px var(--halloween-orange-glow), inset 0 1px 0 rgba(255, 255, 255, 0.1); }
            50% { box-shadow: 0 0 80px var(--halloween-purple-glow), inset 0 1px 0 rgba(255, 255, 255, 0.1); }
            100% { box-shadow: 0 0 60px var(--halloween-orange-glow), inset 0 1px 0 rgba(255, 255, 255, 0.1); }
        }

        @keyframes floatEmojis {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        .main-header h1 {
            font-size: clamp(2em, 5vw, 3.5em);
            font-weight: 800;
            background: linear-gradient(135deg, var(--halloween-orange) 0%, var(--halloween-purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            letter-spacing: -0.02em;
            position: relative;
            z-index: 1;
        }

        .main-header p {
            font-size: 1.125rem;
            color: var(--text-secondary);
            font-weight: 500;
            letter-spacing: -0.01em;
            position: relative;
            z-index: 1;
        }

        /* ============================================
           SCOREBOARD - APPLE CARD STYLE
           ============================================ */
        .scoreboard {
            background: rgba(28, 28, 30, 0.7);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--separator);
            border-radius: 20px;
            padding: 28px;
            margin-bottom: 32px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .scoreboard h2 {
            color: var(--text-primary);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            letter-spacing: -0.02em;
        }

        .players-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .player-card {
            background: var(--bg-elevated);
            border: 1px solid var(--separator);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .player-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--halloween-orange), var(--halloween-purple));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .player-card:hover {
            transform: translateY(-4px) scale(1.02);
            border-color: var(--halloween-orange);
            box-shadow: 0 12px 40px var(--halloween-orange-glow);
        }

        .player-card:hover::before {
            opacity: 1;
        }

        .player-card.highlight {
            animation: cardHighlight 0.6s ease;
        }

        @keyframes cardHighlight {
            0%, 100% {
                transform: scale(1);
                border-color: var(--separator);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            }
            50% {
                transform: scale(1.08);
                border-color: var(--halloween-orange);
                box-shadow: 0 12px 40px var(--halloween-orange-glow);
            }
        }

        .player-name {
            font-size: 1.0625rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            letter-spacing: -0.01em;
        }

        .player-score {
            font-size: 1.5rem;
            color: var(--halloween-orange);
            margin: 8px 0;
            filter: drop-shadow(0 2px 8px var(--halloween-orange-glow));
        }

        .scoreboard-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            background: var(--halloween-orange);
            color: var(--text-primary);
            border: none;
            padding: 14px 28px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', system-ui, sans-serif;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 16px rgba(255, 149, 0, 0.3);
            letter-spacing: -0.01em;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), transparent);
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 8px 24px rgba(255, 149, 0, 0.5);
            filter: brightness(1.1);
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn:active {
            transform: translateY(0) scale(0.98);
            box-shadow: 0 2px 8px rgba(255, 149, 0, 0.3);
        }

        .btn-secondary {
            background: var(--halloween-purple);
            box-shadow: 0 4px 16px rgba(191, 90, 242, 0.3);
        }

        .btn-secondary:hover {
            box-shadow: 0 8px 24px rgba(191, 90, 242, 0.5);
        }

        .btn-danger {
            background: #ff453a;
            box-shadow: 0 4px 16px rgba(255, 69, 58, 0.3);
        }

        .btn-danger:hover {
            box-shadow: 0 8px 24px rgba(255, 69, 58, 0.5);
        }

        /* ============================================
           GAME MENU CARDS - APPLE STYLE
           ============================================ */
        .game-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .game-card {
            background: rgba(28, 28, 30, 0.7);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--separator);
            border-radius: 20px;
            padding: 40px 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, var(--halloween-orange-glow) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .game-card:hover::before {
            opacity: 1;
        }

        .game-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--halloween-orange);
            box-shadow: 0 20px 60px var(--halloween-orange-glow);
        }

        .game-card:active {
            transform: translateY(-4px) scale(1.01);
        }

        .game-icon {
            font-size: 4rem;
            margin-bottom: 16px;
            filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.5));
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-block;
        }

        .game-card:hover .game-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .game-card h3 {
            font-size: 1.375rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
            letter-spacing: -0.02em;
            position: relative;
            z-index: 1;
        }

        .game-card p {
            font-size: 0.9375rem;
            color: var(--text-secondary);
            font-weight: 500;
            letter-spacing: -0.01em;
            position: relative;
            z-index: 1;
        }

        /* ============================================
           GAME SCREENS - SMOOTH TRANSITIONS
           ============================================ */
        .game-screen {
            display: none;
            animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .game-screen.active {
            display: block;
        }

        @keyframes slideIn {
            from { 
                opacity: 0; 
                transform: translateY(20px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        .game-header {
            text-align: center;
            margin-bottom: 28px;
        }

        .game-header h2 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--halloween-orange) 0%, var(--halloween-purple) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
            letter-spacing: -0.02em;
        }

        .back-btn {
            background: var(--bg-elevated);
            border: 1px solid var(--separator);
            color: var(--halloween-purple);
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .back-btn:hover {
            background: var(--bg-tertiary);
            box-shadow: 0 4px 12px rgba(191, 90, 242, 0.3);
        }

        .game-content {
            background: rgba(28, 28, 30, 0.7);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid var(--separator);
            border-radius: 24px;
            padding: 40px 28px;
            min-height: 400px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .instructions {
            background: var(--bg-elevated);
            border: 1px solid var(--separator);
            border-radius: 16px;
            padding: 24px;
            margin-top: 32px;
            text-align: left;
        }

        .instructions h3 {
            color: var(--halloween-orange);
            font-size: 1.125rem;
            font-weight: 700;
            margin-bottom: 12px;
            letter-spacing: -0.01em;
        }

        .instructions p {
            font-size: 1rem;
            line-height: 1.6;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* ============================================
           MAGIC HUNT GAME - APPLE STYLE
           ============================================ */
        .hunt-item-display {
            margin: 32px 0;
        }

        .hunt-item-image {
            max-width: 320px;
            max-height: 320px;
            border-radius: 20px;
            border: 2px solid var(--separator);
            margin: 24px auto;
            display: block;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.6);
            transition: transform 0.3s ease;
        }

        .hunt-item-image:hover {
            transform: scale(1.05);
        }

        .hunt-item-name {
            font-size: 2rem;
            color: var(--halloween-orange);
            font-weight: 700;
            margin: 20px 0;
            letter-spacing: -0.02em;
            text-shadow: 0 4px 12px var(--halloween-orange-glow);
        }

        .hunt-instructions {
            font-size: 1.125rem;
            color: var(--text-secondary);
            margin: 20px 0;
            font-weight: 500;
        }

        /* ============================================
           PUMPKIN RACE GAME - APPLE STYLE
           ============================================ */
        .race-arena {
            position: relative;
            height: 300px;
            background: var(--bg-elevated);
            border: 1px solid var(--separator);
            border-radius: 20px;
            margin: 32px 0;
            overflow: hidden;
            box-shadow: inset 0 2px 20px rgba(0, 0, 0, 0.5);
        }

        .pumpkin-racer {
            position: absolute;
            font-size: 4rem;
            transition: left 0.1s linear;
            top: 50%;
            transform: translateY(-50%);
            filter: drop-shadow(0 8px 20px var(--halloween-orange-glow));
            animation: pumpkinBounce 0.5s ease-in-out infinite;
        }

        @keyframes pumpkinBounce {
            0%, 100% { transform: translateY(-50%) scale(1); }
            50% { transform: translateY(-55%) scale(1.05); }
        }

        .countdown {
            font-size: 5rem;
            font-weight: 800;
            margin: 40px 0;
            background: linear-gradient(135deg, var(--halloween-orange), var(--halloween-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* ============================================
           MEMORY GAME - APPLE CARD STYLE
           ============================================ */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            max-width: 600px;
            margin: 32px auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: var(--bg-elevated);
            border: 1px solid var(--separator);
            border-radius: 16px;
            font-size: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .memory-card:hover {
            transform: translateY(-2px) scale(1.02);
            border-color: var(--halloween-orange);
        }

        .memory-card.flipped {
            background: rgba(28, 28, 30, 0.9);
            border-color: var(--halloween-purple);
            transform: rotateY(180deg);
        }

        .memory-card.matched {
            background: rgba(50, 215, 75, 0.2);
            border-color: var(--halloween-green);
            animation: matchSuccess 0.5s ease;
        }

        @keyframes matchSuccess {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .memory-card .card-back {
            display: block;
        }

        .memory-card .card-front {
            display: none;
        }

        .memory-card.flipped .card-back {
            display: none;
        }

        .memory-card.flipped .card-front {
            display: block;
            filter: drop-shadow(0 4px 8px var(--halloween-orange-glow));
        }

        .memory-stats {
            display: flex;
            justify-content: space-around;
            margin: 24px 0;
            font-size: 1.125rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .memory-stats span {
            color: var(--halloween-orange);
            font-weight: 700;
            font-size: 1.375rem;
        }

        /* ============================================
           SPIDER SPIN GAME - APPLE STYLE
           ============================================ */
        .spinner-container {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 32px auto;
        }

        .spinner-wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid var(--separator);
            position: relative;
            transition: transform 3s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            background: conic-gradient(
                from 0deg,
                var(--bg-elevated) 0deg 45deg,
                var(--bg-tertiary) 45deg 90deg,
                var(--bg-elevated) 90deg 135deg,
                var(--bg-tertiary) 135deg 180deg,
                var(--bg-elevated) 180deg 225deg,
                var(--bg-tertiary) 225deg 270deg,
                var(--bg-elevated) 270deg 315deg,
                var(--bg-tertiary) 315deg 360deg
            );
            box-shadow: 
                0 0 60px var(--halloween-orange-glow),
                inset 0 0 40px rgba(0, 0, 0, 0.4);
        }

        .spinner-segments {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .spinner-segment {
            position: absolute;
            width: 50%;
            height: 50%;
            left: 50%;
            top: 50%;
            transform-origin: 0 0;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 20px;
            font-size: 2rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
        }

        .spinner-center {
            position: absolute;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--halloween-orange), var(--halloween-purple));
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 3px solid var(--bg-primary);
            box-shadow: 0 4px 20px var(--halloween-orange-glow);
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .spinner-pointer {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 40px solid var(--halloween-orange);
            filter: drop-shadow(0 8px 16px var(--halloween-orange-glow));
            z-index: 20;
        }

        .spin-result {
            margin-top: 32px;
            padding: 28px;
            background: var(--bg-elevated);
            border: 1px solid var(--separator);
            border-radius: 20px;
            min-height: 120px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .spin-result h3 {
            color: var(--halloween-orange);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 12px;
            letter-spacing: -0.02em;
        }

        .spin-result p {
            color: var(--text-primary);
            font-size: 1.25rem;
            font-weight: 600;
        }

        /* ============================================
           MODAL - APPLE STYLE
           ============================================ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-secondary);
            border: 1px solid var(--separator);
            border-radius: 24px;
            padding: 40px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
            from { 
                opacity: 0; 
                transform: translateY(20px) scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        .modal-content h3 {
            color: var(--text-primary);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 24px;
            letter-spacing: -0.02em;
        }

        .modal-content input {
            width: 100%;
            padding: 16px;
            font-size: 1rem;
            border: 1px solid var(--separator);
            border-radius: 12px;
            background: var(--bg-elevated);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', system-ui, sans-serif;
            margin-bottom: 24px;
            transition: all 0.2s ease;
        }

        .modal-content input::placeholder {
            color: var(--text-tertiary);
        }

        .modal-content input:focus {
            outline: none;
            border-color: var(--halloween-orange);
            box-shadow: 0 0 0 4px var(--halloween-orange-glow);
        }

        /* ============================================
           WINNER SELECTION
           ============================================ */
        .winner-selection {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
            margin: 32px 0;
        }

        .winner-btn {
            background: var(--halloween-green);
            padding: 12px 24px;
            font-size: 1rem;
            box-shadow: 0 4px 16px rgba(50, 215, 75, 0.3);
        }

        .winner-btn:hover {
            box-shadow: 0 8px 24px rgba(50, 215, 75, 0.5);
        }

        /* ============================================
           RESPONSIVE - MOBILE OPTIMIZED
           ============================================ */
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            .main-header {
                padding: 32px 20px;
            }

            .main-header h1 {
                font-size: 2rem;
            }

            .main-header p {
                font-size: 1rem;
            }

            .game-menu {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .memory-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 8px;
            }

            .memory-card {
                font-size: 2rem;
            }

            .spinner-container {
                width: 300px;
                height: 300px;
            }

            .spinner-segment {
                font-size: 1.5rem;
                padding-right: 15px;
            }

            .game-content {
                padding: 28px 20px;
            }

            .btn {
                padding: 12px 24px;
                font-size: 0.9375rem;
            }
        }

        @media (max-width: 480px) {
            .players-list {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }

            .spinner-container {
                width: 280px;
                height: 280px;
            }

            .toast-notification {
                top: 10px;
                right: 10px;
                left: 10px;
                padding: 16px 20px;
            }

            .toast-notification .toast-icon {
                font-size: 1.5rem;
            }

            .toast-notification .toast-title {
                font-size: 1rem;
            }

            .toast-notification .toast-message {
                font-size: 0.8125rem;
            }
        }

        /* ============================================
           ANIMATIONS - SMOOTH & ELEGANT
           ============================================ */
        @keyframes bounce {
            0%, 100% { 
                transform: translateY(0) scale(1); 
            }
            50% { 
                transform: translateY(-8px) scale(1.02); 
            }
        }

        .bounce {
            animation: bounce 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-6px); }
            75% { transform: translateX(6px); }
        }

        .shake {
            animation: shake 0.3s ease;
        }

        /* Floating Halloween particles */
        @keyframes float {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
                opacity: 0.3;
            }
            50% {
                transform: translateY(-20px) rotate(10deg);
                opacity: 0.6;
            }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ============================================
           UTILITY CLASSES
           ============================================ */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Selection color */
        ::selection {
            background: var(--halloween-orange);
            color: var(--bg-primary);
        }

        ::-moz-selection {
            background: var(--halloween-orange);
            color: var(--bg-primary);
        }

        /* ============================================
           CELEBRATION EFFECTS
           ============================================ */
        .star-burst {
            position: fixed;
            pointer-events: none;
            font-size: 2rem;
            z-index: 9999;
            filter: drop-shadow(0 0 8px var(--halloween-orange-glow));
        }

        @keyframes starBurstOut {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: scale(1.5) rotate(360deg);
                opacity: 0;
            }
        }

        .confetti {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            animation: confettiFall 1.5s ease-out forwards;
        }

        @keyframes confettiFall {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .toast-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-elevated);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--halloween-orange);
            border-radius: 16px;
            padding: 20px 28px;
            z-index: 10000;
            box-shadow: 0 8px 32px var(--halloween-orange-glow);
            animation: slideInRight 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        .toast-notification .toast-icon {
            font-size: 2rem;
            animation: rotate360 0.6s ease-out;
        }

        @keyframes rotate360 {
            from { transform: rotate(0deg) scale(0); }
            to { transform: rotate(360deg) scale(1); }
        }

        .toast-notification .toast-content {
            display: flex;
            flex-direction: column;
        }

        .toast-notification .toast-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--halloween-orange);
            margin-bottom: 4px;
        }

        .toast-notification .toast-message {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <!-- Floating Halloween Particles -->
    <div id="halloween-particles" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; overflow: hidden;"></div>
    
    <div class="container">
        <!-- ============================================
             MAIN MENU SCREEN
             ============================================ -->
        <div id="main-menu" class="game-screen active">
            <div class="main-header">
                <h1>üéÉ Halloween Party Spiele üéÉ</h1>
                <p>W√§hle dein gruseliges Spiel und hab Spa√ü zusammen!</p>
            </div>

            <!-- Scoreboard -->
            <div class="scoreboard">
                <h2>‚≠ê Punktetafel ‚≠ê</h2>
                <div class="players-list" id="players-list">
                    <p style="text-align: center; width: 100%; color: var(--text-secondary); grid-column: 1 / -1;">Noch keine Spieler! F√ºge Spieler hinzu um zu starten.</p>
                </div>
                <div class="scoreboard-buttons">
                    <button class="btn btn-secondary" onclick="addPlayer()">‚ûï Spieler hinzuf√ºgen</button>
                    <button class="btn btn-danger" onclick="resetScoreboard()">üîÑ Spiel zur√ºcksetzen</button>
                </div>
            </div>

            <!-- Game Menu -->
            <div class="game-menu">
                <div class="game-card" onclick="showGame('magic-hunt')">
                    <div class="game-icon">ü™Ñ</div>
                    <h3>Magische Suche</h3>
                    <p>Finde die gruseligen Sachen!</p>
                </div>

                <div class="game-card" onclick="showGame('pumpkin-race')">
                    <div class="game-icon">üéÉ</div>
                    <h3>K√ºrbis-Rennen</h3>
                    <p>Fang den schnellen K√ºrbis!</p>
                </div>

                <div class="game-card" onclick="showGame('monster-memory')">
                    <div class="game-icon">üëª</div>
                    <h3>Monster-Memory</h3>
                    <p>Finde die passenden Paare!</p>
                </div>

                <div class="game-card" onclick="showGame('spider-spin')">
                    <div class="game-icon">üï∑Ô∏è</div>
                    <h3>Spinnen-Dreh</h3>
                    <p>Dreh das Netz!</p>
                </div>

                <div class="game-card" onclick="showGame('stop-dance')">
                    <div class="game-icon">üíÉ</div>
                    <h3>Stoptanz</h3>
                    <p>Tanze und friere ein!</p>
                </div>

                <div class="game-card" onclick="showGame('simon-says')">
                    <div class="game-icon">üé≠</div>
                    <h3>Simon sagt</h3>
                    <p>Folge den Befehlen!</p>
                </div>

                <div class="game-card" onclick="showGame('emoji-catch')">
                    <div class="game-icon">‚ö°</div>
                    <h3>Emoji-Fangen</h3>
                    <p>Fang die richtigen Emojis!</p>
                </div>

                <div class="game-card" onclick="showGame('dance-challenge')">
                    <div class="game-icon">üï∫</div>
                    <h3>Tanz-Challenge</h3>
                    <p>Mach die Bewegungen nach!</p>
                </div>

                <div class="game-card" onclick="showGame('treasure-hunt')">
                    <div class="game-icon">üó∫Ô∏è</div>
                    <h3>Schatzsuche</h3>
                    <p>Folge den Hinweisen!</p>
                </div>

                <div class="game-card" onclick="showGame('bingo')">
                    <div class="game-icon">üéØ</div>
                    <h3>Halloween Bingo</h3>
                    <p>Finde alle Halloween-Dinge!</p>
                </div>

                <div class="game-card" onclick="showGame('traffic-light')">
                    <div class="game-icon">üö¶</div>
                    <h3>Ampel-Spiel</h3>
                    <p>Rot-Gr√ºn-Licht!</p>
                </div>

                <div class="game-card" onclick="showGame('costume-challenge')">
                    <div class="game-icon">üé≠</div>
                    <h3>Verkleidungs-Challenge</h3>
                    <p>Schnell umziehen!</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 1: MAGIC HUNT
             ============================================ -->
        <div id="magic-hunt" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>ü™Ñ Magische Suche ü™Ñ</h2>
            </div>

            <div class="game-content">
                <button class="btn" onclick="generateHuntItem()" style="font-size: 1.5em; padding: 20px 40px;">
                    ‚ú® Zeig mir das n√§chste magische Ding! ‚ú®
                </button>

                <div class="hunt-item-display" id="hunt-display">
                    <p style="color: var(--text-secondary); font-size: 1.125rem;">Klick auf den Knopf um dein erstes magisches Ding zu bekommen!</p>
                </div>

                <div class="winner-selection" id="hunt-winners"></div>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Klick auf den Knopf und sieh dir das magische Ding an. Lauf los und finde dieses Ding im Raum! Wer es als Erster zur√ºckbringt, bekommt einen Stern! ‚≠ê</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 2: PUMPKIN RACE
             ============================================ -->
        <div id="pumpkin-race" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>üéÉ K√ºrbis-Rennen üéÉ</h2>
            </div>

            <div class="game-content">
                <button class="btn" id="race-start-btn" onclick="startRace()" style="font-size: 1.5em; padding: 20px 40px;">
                    üèÅ Rennen starten! üèÅ
                </button>

                <div class="countdown" id="race-countdown"></div>

                <div class="race-arena">
                    <div class="pumpkin-racer" id="pumpkin">üéÉ</div>
                </div>

                <button class="btn btn-secondary hidden" id="catch-btn" onclick="catchPumpkin()" style="font-size: 1.5em; padding: 20px 40px;">
                    üëÜ FANG IHN! üëÜ
                </button>

                <div id="race-result" style="margin-top: 20px; font-size: 1.25rem; color: var(--halloween-orange); font-weight: 600;"></div>

                <div class="winner-selection" id="race-winners"></div>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Warte auf den Countdown und schau dem K√ºrbis beim H√ºpfen zu! Wenn er stehen bleibt, dr√ºcke als Erster auf "FANG IHN!" Das schnellste Kind bekommt einen Stern! ‚≠ê</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 3: MONSTER MEMORY
             ============================================ -->
        <div id="monster-memory" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>üëª Monster-Memory üëª</h2>
            </div>

            <div class="game-content">
                <div class="memory-stats">
                    <div>Z√ºge: <span id="memory-moves">0</span></div>
                    <div>Paare gefunden: <span id="memory-pairs">0</span></div>
                </div>

                <div class="memory-grid" id="memory-grid"></div>

                <button class="btn" onclick="resetMemoryGame()" style="margin-top: 20px;">
                    üîÑ Neues Spiel
                </button>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Klicke auf die Karten um sie umzudrehen. Finde zwei Karten die gleich sind! Wenn du ein Paar findest, bekommst du einen Punkt. Finde alle Paare um zu gewinnen! üéØ</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 4: SPIDER SPIN
             ============================================ -->
        <div id="spider-spin" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>üï∑Ô∏è Spinnen-Dreh üï∑Ô∏è</h2>
            </div>

            <div class="game-content">
                <button class="btn" id="spin-btn" onclick="spinWheel()" style="font-size: 1.5em; padding: 20px 40px;">
                    üåÄ Dreh das Netz! üåÄ
                </button>

                <div class="spinner-container">
                    <div class="spinner-pointer"></div>
                    <div class="spinner-wheel" id="spinner-wheel">
                        <div class="spinner-segments" id="spinner-segments"></div>
                        <div class="spinner-center">üï∑Ô∏è</div>
                    </div>
                </div>

                <div class="spin-result" id="spin-result">
                    <p style="color: var(--text-secondary); font-size: 1.125rem;">Klicke auf "Dreh das Netz" um deine Aufgabe zu bekommen!</p>
                </div>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Dr√ºcke den Knopf um das Spinnennetz zu drehen! Wenn es stehen bleibt, mach was es sagt! Spring, tanze oder mach lustige Ger√§usche! Jeder der mitmacht bekommt einen Stern! ‚≠ê</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 5: STOPTANZ
             ============================================ -->
        <div id="stop-dance" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>üíÉ Stoptanz üï∫</h2>
            </div>

            <div class="game-content">
                <div style="margin-bottom: 24px; display: flex; flex-direction: column; gap: 12px; max-width: 600px; margin: 0 auto 24px;">
                    <p style="color: var(--halloween-orange); font-weight: 600; margin-bottom: 8px;">üéÉ W√§hle Halloween-Musik:</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 8px;">
                        <button class="btn btn-secondary" onclick="loadPresetMusic('spooky')" style="padding: 12px; font-size: 0.875rem;">
                            üëª Gruselig
                        </button>
                        <button class="btn btn-secondary" onclick="loadPresetMusic('fun')" style="padding: 12px; font-size: 0.875rem;">
                            üéâ Lustig
                        </button>
                        <button class="btn btn-secondary" onclick="loadPresetMusic('party')" style="padding: 12px; font-size: 0.875rem;">
                            üíÉ Party
                        </button>
                        <button class="btn btn-secondary" onclick="useSampleMusic()" style="padding: 12px; font-size: 0.875rem;">
                            üéÆ 8-Bit Games
                        </button>
                    </div>
                    
                    <details style="margin-top: 8px;">
                        <summary style="cursor: pointer; color: var(--text-secondary); font-size: 0.875rem; text-align: center;">
                            ‚ûï Mehr Optionen
                        </summary>
                        <div style="display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; margin-top: 12px;">
                            <input type="file" id="music-upload" accept="audio/*" style="display: none;" onchange="loadCustomMusic(event)">
                            <button class="btn btn-secondary" onclick="document.getElementById('music-upload').click()" style="font-size: 0.875rem;">
                                üìÅ Datei hochladen
                            </button>
                            <button class="btn btn-secondary" onclick="showUrlInput()" style="font-size: 0.875rem;">
                                üåê URL laden
                            </button>
                        </div>
                    </details>
                    
                    <div id="url-input-container" style="display: none;">
                        <input type="text" id="music-url-input" placeholder="Musik-URL eingeben (z.B. von Freesound.org)" 
                            style="width: 100%; padding: 12px; font-size: 1rem; border: 1px solid var(--separator); border-radius: 12px; background: var(--bg-elevated); color: var(--text-primary);">
                        <div style="display: flex; gap: 8px; margin-top: 8px;">
                            <button class="btn" onclick="loadUrlMusic()" style="flex: 1;">‚úÖ Laden</button>
                            <button class="btn btn-danger" onclick="hideUrlInput()" style="flex: 1;">‚ùå Abbrechen</button>
                        </div>
                    </div>
                    
                    <p style="color: var(--text-tertiary); font-size: 0.875rem; text-align: center;" id="music-name">
                        üéÆ Klicke auf "8-Bit Games" f√ºr Tetris & Mario Musik!
                    </p>
                </div>

                <div id="dance-status" style="margin: 32px 0;">
                    <div style="font-size: 4rem; margin-bottom: 16px;">üéµ</div>
                    <p style="color: var(--text-secondary); font-size: 1.125rem;">Klicke auf "Musik starten" um zu beginnen!</p>
                </div>

                <button class="btn" id="dance-start-btn" onclick="startStopDance()" style="font-size: 1.5em; padding: 20px 40px;">
                    ‚ñ∂Ô∏è Musik starten!
                </button>
                
                <div style="margin-top: 24px; padding: 16px; background: var(--bg-elevated); border-radius: 12px; max-width: 600px; margin: 24px auto 0;">
                    <details>
                        <summary style="cursor: pointer; color: var(--halloween-orange); font-weight: 600;">
                            ‚ÑπÔ∏è Wo finde ich kostenlose Musik?
                        </summary>
                        <div style="margin-top: 12px; color: var(--text-secondary); font-size: 0.875rem; line-height: 1.6;">
                            <p><strong>Freie Musik-Quellen:</strong></p>
                            <ul style="margin: 8px 0; padding-left: 20px;">
                                <li><strong>Freesound.org</strong> - Suche "dance music", Rechtsklick auf "Download" ‚Üí Link kopieren</li>
                                <li><strong>Pixabay Music</strong> - Kostenlose Party-Musik zum Download</li>
                                <li><strong>YouTube Audio Library</strong> - Musik herunterladen und als Datei hochladen</li>
                                <li><strong>Incompetech.com</strong> - Kevin MacLeod's freie Musik</li>
                            </ul>
                            <p style="margin-top: 12px;"><strong>Beispiel-URLs:</strong></p>
                            <ul style="margin: 8px 0; padding-left: 20px; font-size: 0.8125rem;">
                                <li><code style="background: var(--bg-primary); padding: 2px 6px; border-radius: 4px;">https://cdn.pixabay.com/audio/...</code></li>
                            </ul>
                            <p style="margin-top: 8px;"><em>üí° Tipp: Die URL muss direkt zur MP3/Audio-Datei f√ºhren!</em></p>
                        </div>
                    </details>
                </div>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Tanzt solange die Musik l√§uft! Wenn die Musik stoppt, m√ºsst ihr sofort einfrieren wie Statuen! Wer sich noch bewegt scheidet aus! üßä</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 6: SIMON SAGT
             ============================================ -->
        <div id="simon-says" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>üé≠ Simon sagt üé≠</h2>
            </div>

            <div class="game-content">
                <div id="simon-command-display" style="margin: 40px 0; min-height: 200px;">
                    <div style="font-size: 4rem; margin-bottom: 16px;">üé≠</div>
                    <p style="color: var(--text-secondary); font-size: 1.125rem;">Klicke auf "Neuer Befehl" um zu starten!</p>
                </div>

                <button class="btn" onclick="generateSimonCommand()" style="font-size: 1.5em; padding: 20px 40px;">
                    üéØ Neuer Befehl!
                </button>

                <div style="margin-top: 24px;">
                    <button class="btn btn-secondary" onclick="toggleSimonMode()" id="simon-mode-btn">
                        Modus: Normal (mit "Simon sagt")
                    </button>
                </div>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Wenn der Befehl mit "Simon sagt..." beginnt, m√ºsst ihr es machen! Wenn "Simon sagt" NICHT dabei ist, d√ºrft ihr es NICHT machen! Wer einen Fehler macht, scheidet aus! üéØ</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 7: EMOJI-FANGEN
             ============================================ -->
        <div id="emoji-catch" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>‚ö° Emoji-Fangen ‚ö°</h2>
            </div>

            <div class="game-content">
                <div style="display: flex; justify-content: space-around; margin-bottom: 24px; font-size: 1.125rem;">
                    <div>Runde: <span id="emoji-round" style="color: var(--halloween-orange); font-weight: 700;">0</span></div>
                    <div>Punkte: <span id="emoji-score" style="color: var(--halloween-green); font-weight: 700;">0</span></div>
                    <div>Zeit: <span id="emoji-time" style="color: var(--halloween-purple); font-weight: 700;">30</span>s</div>
                </div>

                <div id="emoji-target-display" style="margin: 24px 0;">
                    <p style="color: var(--text-secondary); margin-bottom: 12px;">Fange alle:</p>
                    <div id="emoji-target" style="font-size: 3rem;">üéÉ</div>
                </div>

                <div id="emoji-game-area" style="
                    position: relative;
                    height: 400px;
                    background: var(--bg-elevated);
                    border: 1px solid var(--separator);
                    border-radius: 20px;
                    margin: 24px 0;
                    overflow: hidden;
                "></div>

                <button class="btn" id="emoji-start-btn" onclick="startEmojiGame()" style="font-size: 1.5em; padding: 20px 40px;">
                    üöÄ Spiel starten!
                </button>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Schau welches Emoji oben angezeigt wird. Klicke nur auf dieses Emoji wenn es erscheint! Ignoriere alle anderen! Du hast 30 Sekunden! ‚ö°</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 8: TANZ-CHALLENGE
             ============================================ -->
        <div id="dance-challenge" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>üï∫ Tanz-Challenge üíÉ</h2>
            </div>

            <div class="game-content">
                <div id="dance-move-display" style="margin: 40px 0; min-height: 250px;">
                    <div style="font-size: 5rem; margin-bottom: 16px;" id="dance-emoji">üï∫</div>
                    <div style="font-size: 2rem; color: var(--halloween-orange); font-weight: 700; margin-bottom: 12px;" id="dance-move-name">Bereit?</div>
                    <p style="color: var(--text-secondary); font-size: 1.125rem;" id="dance-move-desc">Klicke auf "Challenge starten" um zu beginnen!</p>
                </div>

                <div id="dance-timer" style="font-size: 3rem; color: var(--halloween-purple); font-weight: 800; margin: 24px 0;"></div>

                <button class="btn" id="dance-challenge-btn" onclick="startDanceChallenge()" style="font-size: 1.5em; padding: 20px 40px;">
                    üéµ Challenge starten!
                </button>

                <div style="margin-top: 24px;">
                    <label style="color: var(--text-secondary); font-size: 1rem; display: flex; align-items: center; gap: 8px; justify-content: center;">
                        <input type="checkbox" id="dance-mode-toggle" style="width: 20px; height: 20px;">
                        <span>Schwieriger Modus (schnellere Wechsel)</span>
                    </label>
                </div>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Auf dem Bildschirm erscheinen verschiedene Bewegungen. Macht die Bewegung nach bevor die Zeit abl√§uft! Alle die mitmachen bekommen Punkte! üéØ</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 9: SCHATZSUCHE
             ============================================ -->
        <div id="treasure-hunt" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>üó∫Ô∏è Schatzsuche üó∫Ô∏è</h2>
            </div>

            <div class="game-content">
                <div style="display: flex; justify-content: center; gap: 24px; margin-bottom: 24px; font-size: 1.125rem;">
                    <div>Hinweis: <span id="treasure-clue-num" style="color: var(--halloween-orange); font-weight: 700;">0</span> / <span id="treasure-total">5</span></div>
                </div>

                <div id="treasure-clue-display" style="
                    margin: 32px 0;
                    padding: 32px;
                    background: var(--bg-elevated);
                    border: 2px solid var(--halloween-orange);
                    border-radius: 20px;
                    min-height: 250px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                ">
                    <div style="font-size: 5rem; margin-bottom: 16px;">üó∫Ô∏è</div>
                    <p style="color: var(--text-secondary); font-size: 1.125rem; text-align: center;">Klicke auf "N√§chster Hinweis" um die Schatzsuche zu starten!</p>
                </div>

                <button class="btn" onclick="showNextClue()" style="font-size: 1.5em; padding: 20px 40px;">
                    üîç N√§chster Hinweis!
                </button>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Lest den Hinweis laut vor! Sucht in der Wohnung oder drau√üen nach dem Ort! Wenn ihr ihn gefunden habt, kommt zur√ºck f√ºr den n√§chsten Hinweis! üó∫Ô∏è</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 10: HALLOWEEN BINGO
             ============================================ -->
        <div id="bingo" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>üéØ Halloween Bingo üéØ</h2>
            </div>

            <div class="game-content">
                <div style="margin-bottom: 24px; padding: 20px; background: var(--bg-elevated); border-radius: 16px; text-align: center;">
                    <div style="font-size: 1.5rem; color: var(--halloween-orange); font-weight: 700; margin-bottom: 12px;">
                        Gefunden: <span id="bingo-found" style="color: var(--halloween-green);">0</span> / <span id="bingo-total">16</span>
                    </div>
                    <div style="font-size: 1rem; color: var(--text-secondary);">
                        Tippe auf die Felder die du findest! üîç
                    </div>
                </div>

                <div id="bingo-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; max-width: 600px; margin: 0 auto;">
                    <!-- Bingo grid will be generated here -->
                </div>

                <div style="margin-top: 32px; display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
                    <button class="btn" onclick="resetBingo()" style="font-size: 1.25em; padding: 16px 32px;">
                        üîÑ Neues Spiel
                    </button>
                </div>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Suche in der Wohnung oder drau√üen nach den Halloween-Dingen auf den Karten! Wenn du etwas findest, tippe auf das Feld! Wer zuerst eine Reihe voll hat, gewinnt! üéÉ</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 11: AMPEL-SPIEL
             ============================================ -->
        <div id="traffic-light" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>üö¶ Ampel-Spiel üö¶</h2>
            </div>

            <div class="game-content">
                <div id="traffic-light-display" style="
                    margin: 40px 0;
                    padding: 60px;
                    border-radius: 30px;
                    transition: all 0.3s ease;
                    min-height: 300px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                ">
                    <div style="font-size: 8rem; margin-bottom: 16px;">üéÉ</div>
                    <p style="font-size: 1.5rem; color: var(--text-secondary);">Klicke auf "Spiel starten"!</p>
                </div>

                <button class="btn" id="traffic-btn" onclick="startTrafficLight()" style="font-size: 1.5em; padding: 20px 40px;">
                    üö¶ Spiel starten!
                </button>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Bei üü¢ GR√úN lauft los! Bei üî¥ ROT m√ºsst ihr sofort stehen bleiben! Wer sich bei Rot bewegt, scheidet aus! Lauft zur anderen Seite des Raumes! üèÉ</p>
                </div>
            </div>
        </div>

        <!-- ============================================
             GAME 12: VERKLEIDUNGS-CHALLENGE
             ============================================ -->
        <div id="costume-challenge" class="game-screen">
            <button class="btn back-btn" onclick="showGame('main-menu')">‚¨ÖÔ∏è Zur√ºck zum Men√º</button>
            
            <div class="game-header">
                <h2>üé≠ Verkleidungs-Challenge üé≠</h2>
            </div>

            <div class="game-content">
                <div id="costume-task-display" style="margin: 40px 0; min-height: 250px;">
                    <div style="font-size: 5rem; margin-bottom: 16px;" id="costume-emoji">üëª</div>
                    <div style="font-size: 2rem; color: var(--halloween-orange); font-weight: 700; margin-bottom: 12px;" id="costume-task">Bereit?</div>
                    <p style="color: var(--text-secondary); font-size: 1.125rem;" id="costume-desc">Klicke auf "Challenge starten" um zu beginnen!</p>
                </div>

                <div id="costume-timer-display" style="font-size: 5rem; color: var(--halloween-purple); font-weight: 800; margin: 32px 0;"></div>

                <button class="btn" id="costume-challenge-btn" onclick="startCostumeChallenge()" style="font-size: 1.5em; padding: 20px 40px;">
                    üé¨ Challenge starten!
                </button>

                <div style="margin-top: 24px;">
                    <label style="color: var(--text-secondary); font-size: 1rem; display: flex; align-items: center; gap: 8px; justify-content: center;">
                        <input type="number" id="costume-time-input" value="60" min="30" max="180" style="width: 80px; padding: 8px; border: 1px solid var(--separator); border-radius: 8px; background: var(--bg-elevated); color: var(--text-primary); text-align: center;">
                        <span>Sekunden pro Aufgabe</span>
                    </label>
                </div>

                <div class="instructions">
                    <h3>üë∂ So wird gespielt:</h3>
                    <p>Du bekommst eine Verkleidungs-Aufgabe! Lauf los und zieh dir so schnell wie m√∂glich die Sachen an! Die Zeit l√§uft! Wer am schnellsten fertig ist, gewinnt! ‚è±Ô∏è</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================
         ADD PLAYER MODAL
         ============================================ -->
    <div class="modal" id="player-modal">
        <div class="modal-content">
            <h3>Neuen Spieler hinzuf√ºgen</h3>
            <input type="text" id="player-name-input" placeholder="Spielername eingeben..." maxlength="20">
            <div style="display: flex; gap: 10px;">
                <button class="btn" onclick="savePlayer()">‚úÖ Hinzuf√ºgen</button>
                <button class="btn btn-danger" onclick="closeModal()">‚ùå Abbrechen</button>
            </div>
        </div>
    </div>

    <script>
        /* ============================================
           GLOBAL STATE & UTILITIES
           ============================================ */
        
        // Initialize players from localStorage
        let players = JSON.parse(localStorage.getItem('halloween-players')) || [];

        // Save players to localStorage
        function savePlayers(highlightPlayerName = null) {
            localStorage.setItem('halloween-players', JSON.stringify(players));
            updateScoreboard(highlightPlayerName);
        }

        // Update scoreboard display
        function updateScoreboard(highlightPlayerName = null) {
            const playersList = document.getElementById('players-list');
            
            if (players.length === 0) {
                playersList.innerHTML = '<p style="text-align: center; width: 100%; color: var(--text-secondary); grid-column: 1 / -1;">Noch keine Spieler! F√ºge Spieler hinzu um zu starten.</p>';
            } else {
                playersList.innerHTML = players.map(player => `
                    <div class="player-card" data-player-name="${player.name}">
                        <div class="player-name">${player.name}</div>
                        <div class="player-score">${'‚≠ê'.repeat(player.score)}</div>
                        <div style="color: var(--halloween-orange); font-size: 1.125rem; font-weight: 700;">${player.score}</div>
                    </div>
                `).join('');
                
                // Highlight the player who just won
                if (highlightPlayerName) {
                    setTimeout(() => {
                        const playerCard = document.querySelector(`.player-card[data-player-name="${highlightPlayerName}"]`);
                        if (playerCard) {
                            playerCard.classList.add('highlight');
                            setTimeout(() => playerCard.classList.remove('highlight'), 600);
                        }
                    }, 50);
                }
            }

            // Update winner selection buttons in games
            updateWinnerButtons();
        }

        // Update winner selection buttons
        function updateWinnerButtons() {
            const huntWinners = document.getElementById('hunt-winners');
            const raceWinners = document.getElementById('race-winners');
            
            if (players.length > 0) {
                const winnerHTML = players.map(player => `
                    <button class="btn winner-btn" onclick="awardStar('${player.name}', event)">
                        ${player.name} hat gewonnen! ‚≠ê
                    </button>
                `).join('');
                
                if (huntWinners) huntWinners.innerHTML = winnerHTML;
                if (raceWinners) raceWinners.innerHTML = winnerHTML;
            } else {
                if (huntWinners) huntWinners.innerHTML = '';
                if (raceWinners) raceWinners.innerHTML = '';
            }
        }

        // Award star to player
        function awardStar(playerName, evt) {
            const player = players.find(p => p.name === playerName);
            if (player) {
                player.score++;
                savePlayers(playerName); // Pass player name for highlighting
                
                // Get button position for effects
                let buttonX = window.innerWidth / 2;
                let buttonY = window.innerHeight / 2;
                
                if (evt && evt.target) {
                    const btn = evt.target;
                    const rect = btn.getBoundingClientRect();
                    buttonX = rect.left + rect.width / 2;
                    buttonY = rect.top + rect.height / 2;
                    
                    // Button bounce animation
                    btn.classList.add('bounce');
                    setTimeout(() => btn.classList.remove('bounce'), 400);
                }
                
                // Trigger celebration effects
                celebrateWin(playerName, buttonX, buttonY);
            }
        }

        // Celebration effects
        function celebrateWin(playerName, x, y) {
            // Create star burst effect
            createStarBurst(x, y);
            
            // Create confetti
            createConfetti(x, y);
            
            // Show toast notification
            showToast(playerName);
            
            // Shake scoreboard to draw attention
            const scoreboard = document.querySelector('.scoreboard');
            if (scoreboard) {
                scoreboard.classList.add('shake');
                setTimeout(() => scoreboard.classList.remove('shake'), 300);
            }
        }

        // Create star burst animation
        function createStarBurst(x, y) {
            const stars = ['‚≠ê', '‚ú®', 'üåü', 'üí´'];
            const burstCount = 8;
            
            for (let i = 0; i < burstCount; i++) {
                const star = document.createElement('div');
                star.className = 'star-burst';
                star.textContent = stars[Math.floor(Math.random() * stars.length)];
                
                const angle = (Math.PI * 2 * i) / burstCount;
                const distance = 150;
                const endX = x + Math.cos(angle) * distance;
                const endY = y + Math.sin(angle) * distance;
                
                star.style.left = x + 'px';
                star.style.top = y + 'px';
                
                document.body.appendChild(star);
                
                // Animate to end position
                star.animate([
                    { 
                        transform: 'translate(-50%, -50%) scale(0) rotate(0deg)',
                        opacity: 1
                    },
                    { 
                        transform: `translate(${endX - x - 16}px, ${endY - y - 16}px) scale(1.5) rotate(360deg)`,
                        opacity: 0
                    }
                ], {
                    duration: 800,
                    easing: 'cubic-bezier(0.4, 0, 0.2, 1)'
                });
                
                setTimeout(() => star.remove(), 800);
            }
        }

        // Create confetti effect
        function createConfetti(x, y) {
            const confettiColors = ['üéÉ', 'üëª', 'üç¨', '‚≠ê', 'üéâ'];
            const confettiCount = 20;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.textContent = confettiColors[Math.floor(Math.random() * confettiColors.length)];
                confetti.style.left = (x + (Math.random() - 0.5) * 100) + 'px';
                confetti.style.top = y + 'px';
                confetti.style.fontSize = (Math.random() * 1.5 + 0.5) + 'rem';
                
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 1500);
            }
        }

        // Show toast notification
        function showToast(playerName) {
            // Remove existing toast if any
            const existingToast = document.querySelector('.toast-notification');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = 'toast-notification';
            toast.innerHTML = `
                <div class="toast-icon">üéâ</div>
                <div class="toast-content">
                    <div class="toast-title">Gl√ºckwunsch!</div>
                    <div class="toast-message">${playerName} hat einen Stern gewonnen! ‚≠ê</div>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // Play celebration sound
            playWinSound();
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                toast.style.animation = 'slideOutRight 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Play win sound using Web Audio API
        function playWinSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Create a simple celebratory sound
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Rising pitch for celebration
                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                oscillator.frequency.exponentialRampToValueAtTime(783.99, audioContext.currentTime + 0.1); // G5
                oscillator.frequency.exponentialRampToValueAtTime(1046.5, audioContext.currentTime + 0.2); // C6
                
                oscillator.type = 'sine';
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } catch (e) {
                // Silent fail if audio not supported
                console.log('Audio not supported');
            }
        }

        // Show/hide game screens
        function showGame(gameId) {
            document.querySelectorAll('.game-screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(gameId).classList.add('active');

            // Initialize game if needed
            if (gameId === 'monster-memory') {
                initMemoryGame();
            } else if (gameId === 'spider-spin') {
                initSpinner();
            }
        }

        // Add player modal
        function addPlayer() {
            document.getElementById('player-modal').classList.add('active');
            document.getElementById('player-name-input').value = '';
            document.getElementById('player-name-input').focus();
        }

        // Close modal
        function closeModal() {
            document.getElementById('player-modal').classList.remove('active');
        }

        // Save player
        function savePlayer() {
            const input = document.getElementById('player-name-input');
            const name = input.value.trim();
            
            if (name) {
                players.push({ name: name, score: 0 });
                savePlayers();
                closeModal();
            }
        }

        // Allow Enter key in modal
        document.getElementById('player-name-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                savePlayer();
            }
        });

        // Reset scoreboard
        function resetScoreboard() {
            if (confirm('Bist du sicher, dass du alle Spieler und Punkte zur√ºcksetzen m√∂chtest?')) {
                players = [];
                savePlayers();
            }
        }

        /* ============================================
           GAME 1: MAGIC HUNT
           ============================================ */
        
        const huntItems = [
            { name: "Zauberstab", emoji: "ü™Ñ", image: "istockphoto-1270108421-612x612.jpg" },
            { name: "K√ºrbis", emoji: "üéÉ", image: "istockphoto-1447253286-612x612.jpg" },
            { name: "Spinne", emoji: "üï∑Ô∏è", image: "istockphoto-1541868655-612x612.jpg" },
            { name: "Spinnennetz", emoji: "üï∏Ô∏è", image: "istockphoto-1751212463-612x612.jpg" },
            { name: "S√º√üigkeit", emoji: "üç¨", image: "istockphoto-2157543699-612x612.jpg" },
            { name: "Hexenhut", emoji: "üßô", image: "istockphoto-2166855991-612x612.jpg" },
            { name: "Fledermaus", emoji: "ü¶á", image: "istockphoto-2168682946-612x612.jpg" },
            { name: "Geist", emoji: "üëª", image: "istockphoto-613872668-612x612.jpg" },
            { name: "G√ºrtel", emoji: "üëî", image: "istockphoto-808369484-612x612.jpg" },
            { name: "Besen", emoji: "üßπ", image: "OIP.jpg" },
            { name: "Kerze", emoji: "üïØÔ∏è", image: "OIP (1).jpg" },
            { name: "Schwarze Katze", emoji: "üêà‚Äç‚¨õ", image: "OIP (2).jpg" }
        ];

        function generateHuntItem() {
            const randomItem = huntItems[Math.floor(Math.random() * huntItems.length)];
            const display = document.getElementById('hunt-display');
            
            display.innerHTML = `
                <div class="hunt-item-name">Finde das!</div>
                <img src="${randomItem.image}" alt="${randomItem.name}" class="hunt-item-image" onerror="this.style.display='none'">
                <div style="font-size: 5em; margin: 20px 0;">${randomItem.emoji}</div>
                <div class="hunt-item-name">${randomItem.name}</div>
                <div class="hunt-instructions">üèÉ Lauf los und bring dieses Ding! Wer es als Erster bringt, bekommt einen Stern! ‚≠ê</div>
            `;

            // Animation
            display.classList.add('bounce');
            setTimeout(() => display.classList.remove('bounce'), 500);
        }

        /* ============================================
           GAME 2: PUMPKIN RACE
           ============================================ */
        
        let raceActive = false;
        let raceInterval = null;
        let raceStartTime = 0;

        function startRace() {
            if (raceActive) return;
            
            const startBtn = document.getElementById('race-start-btn');
            const countdown = document.getElementById('race-countdown');
            const catchBtn = document.getElementById('catch-btn');
            const pumpkin = document.getElementById('pumpkin');
            const result = document.getElementById('race-result');
            
            startBtn.disabled = true;
            catchBtn.classList.add('hidden');
            result.textContent = '';
            pumpkin.style.left = '0px';
            
            // Countdown
            let count = 3;
            countdown.textContent = count;
            
            const countInterval = setInterval(() => {
                count--;
                if (count > 0) {
                    countdown.textContent = count;
                } else if (count === 0) {
                    countdown.textContent = 'LOS!';
                } else {
                    clearInterval(countInterval);
                    countdown.textContent = '';
                    startPumpkinRace();
                }
            }, 1000);
        }

        function startPumpkinRace() {
            raceActive = true;
            const pumpkin = document.getElementById('pumpkin');
            const catchBtn = document.getElementById('catch-btn');
            const arena = document.querySelector('.race-arena');
            
            let position = 0;
            let direction = 1;
            const maxPosition = arena.offsetWidth - 80;
            const stopTime = Date.now() + (3000 + Math.random() * 3000); // 3-6 seconds
            
            raceInterval = setInterval(() => {
                if (Date.now() >= stopTime) {
                    clearInterval(raceInterval);
                    raceActive = false;
                    catchBtn.classList.remove('hidden');
                    raceStartTime = Date.now();
                    return;
                }
                
                position += direction * 10;
                if (position >= maxPosition || position <= 0) {
                    direction *= -1;
                }
                pumpkin.style.left = position + 'px';
            }, 50);
        }

        function catchPumpkin() {
            const catchBtn = document.getElementById('catch-btn');
            const result = document.getElementById('race-result');
            const startBtn = document.getElementById('race-start-btn');
            
            catchBtn.classList.add('hidden');
            
            const reactionTime = Date.now() - raceStartTime;
            result.textContent = `Gefangen in ${(reactionTime / 1000).toFixed(2)} Sekunden! üéâ`;
            result.classList.add('bounce');
            setTimeout(() => result.classList.remove('bounce'), 500);
            
            startBtn.disabled = false;
        }

        /* ============================================
           GAME 3: MONSTER MEMORY
           ============================================ */
        
        const memoryIcons = ['üéÉ', 'üëª', 'üï∑Ô∏è', 'üç¨', 'ü¶á', 'üßô', 'üßπ', 'üêà‚Äç‚¨õ'];
        let memoryCards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let moves = 0;
        let canFlip = true;

        function initMemoryGame() {
            // Create pairs
            memoryCards = [...memoryIcons, ...memoryIcons]
                .sort(() => Math.random() - 0.5)
                .map((icon, index) => ({ id: index, icon: icon, matched: false }));
            
            matchedPairs = 0;
            moves = 0;
            flippedCards = [];
            canFlip = true;
            
            renderMemoryGame();
        }

        function renderMemoryGame() {
            const grid = document.getElementById('memory-grid');
            document.getElementById('memory-moves').textContent = moves;
            document.getElementById('memory-pairs').textContent = matchedPairs;
            
            grid.innerHTML = memoryCards.map(card => `
                <div class="memory-card ${card.matched ? 'matched flipped' : ''}" 
                     data-id="${card.id}" 
                     onclick="flipCard(${card.id})">
                    <div class="card-back">‚ùì</div>
                    <div class="card-front">${card.icon}</div>
                </div>
            `).join('');
        }

        function flipCard(cardId) {
            if (!canFlip) return;
            
            const card = memoryCards[cardId];
            if (card.matched || flippedCards.includes(cardId)) return;
            
            flippedCards.push(cardId);
            const cardElement = document.querySelector(`[data-id="${cardId}"]`);
            cardElement.classList.add('flipped');
            
            if (flippedCards.length === 2) {
                canFlip = false;
                moves++;
                document.getElementById('memory-moves').textContent = moves;
                
                const [id1, id2] = flippedCards;
                const card1 = memoryCards[id1];
                const card2 = memoryCards[id2];
                
                if (card1.icon === card2.icon) {
                    // Match!
                    card1.matched = true;
                    card2.matched = true;
                    matchedPairs++;
                    document.getElementById('memory-pairs').textContent = matchedPairs;
                    
                    const matchedElements = [
                        document.querySelector(`[data-id="${id1}"]`),
                        document.querySelector(`[data-id="${id2}"]`)
                    ];
                    matchedElements.forEach(el => {
                        el.classList.add('matched');
                        el.classList.add('bounce');
                    });
                    
                    // Award stars to all players for each pair
                    players.forEach(player => player.score++);
                    savePlayers();
                    
                    flippedCards = [];
                    canFlip = true;
                    
                    // Check if game won
                    if (matchedPairs === memoryIcons.length) {
                        setTimeout(() => {
                            alert('üéâ Toll gemacht! Du hast alle Paare gefunden! üéâ');
                        }, 500);
                    }
                } else {
                    // No match
                    setTimeout(() => {
                        cardElement.classList.remove('flipped');
                        document.querySelector(`[data-id="${flippedCards[0]}"]`).classList.remove('flipped');
                        flippedCards = [];
                        canFlip = true;
                    }, 1000);
                }
            }
        }

        function resetMemoryGame() {
            initMemoryGame();
        }

        /* ============================================
           GAME 4: SPIDER SPIN
           ============================================ */
        
        const spinActions = [
            { icon: 'üê∏', text: 'Spring wie ein Frosch!' },
            { icon: 'üíÄ', text: 'Tanze wie ein Skelett!' },
            { icon: 'üëª', text: 'Sag dreimal BOO!' },
            { icon: 'üåÄ', text: 'Dreh dich im Kreis!' },
            { icon: 'ü¶∏', text: 'Mach eine Superhelden-Pose!' },
            { icon: 'üêí', text: 'Mach Affenger√§usche!' },
            { icon: 'üé≠', text: 'Mach ein lustiges Gesicht!' },
            { icon: 'ü¶ò', text: 'H√ºpf auf einem Bein!' }
        ];

        let isSpinning = false;

        function initSpinner() {
            const segments = document.getElementById('spinner-segments');
            const anglePerSegment = 360 / spinActions.length;
            
            segments.innerHTML = spinActions.map((action, index) => {
                const angle = anglePerSegment * index;
                return `
                    <div class="spinner-segment" style="transform: rotate(${angle}deg)">
                        ${action.icon}
                    </div>
                `;
            }).join('');
        }

        function spinWheel() {
            if (isSpinning) return;
            
            isSpinning = true;
            const wheel = document.getElementById('spinner-wheel');
            const btn = document.getElementById('spin-btn');
            const result = document.getElementById('spin-result');
            
            btn.disabled = true;
            result.innerHTML = '<p style="color: var(--text-secondary); font-size: 1.125rem;">Dreht sich... üåÄ</p>';
            
            // Random rotation (multiple full rotations + random position)
            const baseRotations = 5;
            const randomRotation = Math.random() * 360;
            const totalRotation = (baseRotations * 360) + randomRotation;
            
            wheel.style.transform = `rotate(${totalRotation}deg)`;
            
            setTimeout(() => {
                // Calculate which segment we landed on
                const normalizedAngle = randomRotation % 360;
                const segmentAngle = 360 / spinActions.length;
                const segmentIndex = Math.floor((360 - normalizedAngle + segmentAngle / 2) / segmentAngle) % spinActions.length;
                const action = spinActions[segmentIndex];
                
                result.innerHTML = `
                    <h3>${action.icon}</h3>
                    <p>${action.text}</p>
                `;
                result.classList.add('bounce');
                setTimeout(() => result.classList.remove('bounce'), 500);
                
                // Award stars to all players
                players.forEach(player => player.score++);
                savePlayers();
                
                btn.disabled = false;
                isSpinning = false;
            }, 3000);
        }

        /* ============================================
           GAME 5: STOPTANZ - VERBESSERT
           ============================================ */
        
        let danceAudio = null;
        let isDancing = false;
        let stopDanceTimeout = null;
        let musicOscillators = [];

        // UI Helper Functions
        function showUrlInput() {
            document.getElementById('url-input-container').style.display = 'block';
        }

        function hideUrlInput() {
            document.getElementById('url-input-container').style.display = 'none';
            document.getElementById('music-url-input').value = '';
        }

        // Load custom music from file
        function loadCustomMusic(event) {
            const file = event.target.files[0];
            if (file) {
                try {
                    if (danceAudio) {
                        danceAudio.pause();
                        danceAudio = null;
                    }
                    
                    const url = URL.createObjectURL(file);
                    danceAudio = new Audio(url);
                    danceAudio.loop = true;
                    
                    document.getElementById('music-name').textContent = `‚úÖ Geladen: ${file.name}`;
                    document.getElementById('music-name').style.color = 'var(--halloween-green)';
                } catch (e) {
                    alert('Fehler beim Laden der Datei: ' + e.message);
                }
            }
        }

        // Load music from URL
        function loadUrlMusic() {
            const url = document.getElementById('music-url-input').value.trim();
            if (!url) {
                alert('Bitte eine URL eingeben!');
                return;
            }

            try {
                if (danceAudio) {
                    danceAudio.pause();
                    danceAudio = null;
                }
                
                danceAudio = new Audio(url);
                danceAudio.loop = true;
                danceAudio.crossOrigin = "anonymous"; // For CORS
                
                // Test if it loads
                danceAudio.addEventListener('loadeddata', () => {
                    document.getElementById('music-name').textContent = `‚úÖ Online-Musik geladen`;
                    document.getElementById('music-name').style.color = 'var(--halloween-green)';
                    hideUrlInput();
                }, { once: true });
                
                danceAudio.addEventListener('error', () => {
                    alert('Fehler beim Laden der URL. Stelle sicher, dass es ein direkter Link zu einer Audio-Datei ist!');
                    danceAudio = null;
                }, { once: true });
                
                // Preload
                danceAudio.load();
                
            } catch (e) {
                alert('Fehler: ' + e.message);
            }
        }

        // Preset Halloween Music URLs (royalty-free sources)
        const presetMusicUrls = {
            spooky: [
                'https://cdn.pixabay.com/audio/2022/03/10/audio_4f10c6f4d4.mp3', // Spooky Halloween
                'https://assets.mixkit.co/active_storage/sfx/2868/2868-preview.mp3' // Halloween theme
            ],
            fun: [
                'https://cdn.pixabay.com/audio/2023/10/04/audio_5ba03e77eb.mp3', // Funny Halloween
                'https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3' // Fun kids music
            ],
            party: [
                'https://cdn.pixabay.com/audio/2022/10/25/audio_12345abc.mp3', // Party beat
                'https://assets.mixkit.co/active_storage/sfx/513/513-preview.mp3' // Upbeat kids
            ]
        };

        // Load preset music
        function loadPresetMusic(type) {
            const urls = presetMusicUrls[type];
            const url = urls[Math.floor(Math.random() * urls.length)];
            
            try {
                if (danceAudio) {
                    danceAudio.pause();
                    danceAudio = null;
                }
                
                danceAudio = new Audio(url);
                danceAudio.loop = true;
                danceAudio.crossOrigin = "anonymous";
                
                const typeNames = {
                    spooky: 'üëª Gruselige Halloween-Musik',
                    fun: 'üéâ Lustige Halloween-Musik',
                    party: 'üíÉ Party-Musik'
                };
                
                // Try to load
                danceAudio.addEventListener('loadeddata', () => {
                    document.getElementById('music-name').textContent = `‚úÖ ${typeNames[type]} geladen`;
                    document.getElementById('music-name').style.color = 'var(--halloween-green)';
                }, { once: true });
                
                danceAudio.addEventListener('error', () => {
                    // Fallback to generated music if URL fails
                    console.log('Preset music failed, using generated');
                    danceAudio = null;
                    document.getElementById('music-name').textContent = `üéµ Nutze generierte Party-Musik (Online-Musik nicht verf√ºgbar)`;
                    document.getElementById('music-name').style.color = 'var(--text-secondary)';
                }, { once: true });
                
                danceAudio.load();
                
            } catch (e) {
                console.log('Error loading preset:', e);
                danceAudio = null;
                document.getElementById('music-name').textContent = `üéµ Nutze generierte Party-Musik`;
            }
        }

        // Music theme selection
        let currentMusicTheme = 'tetris'; // 'tetris' or 'mario'

        // Use sample music (better generated music)
        function useSampleMusic() {
            if (danceAudio) {
                danceAudio.pause();
                danceAudio = null;
            }
            // Switch theme on each call
            currentMusicTheme = currentMusicTheme === 'tetris' ? 'mario' : 'tetris';
            const themeName = currentMusicTheme === 'tetris' ? 'Tetris-Theme' : 'Super Mario-Theme';
            document.getElementById('music-name').textContent = `üéÆ ${themeName} (8-Bit)`;
            document.getElementById('music-name').style.color = 'var(--halloween-orange)';
        }

        // Start/Stop the dance game
        function startStopDance() {
            if (isDancing) {
                forceStopMusic();
                return;
            }

            isDancing = true;
            const btn = document.getElementById('dance-start-btn');
            const status = document.getElementById('dance-status');
            
            btn.textContent = '‚è∏Ô∏è Musik stoppen';
            btn.classList.add('btn-danger');
            
            status.innerHTML = `
                <div style="font-size: 5rem; margin-bottom: 16px; animation: spin 2s linear infinite;">üíÉ</div>
                <div style="font-size: 2rem; color: var(--halloween-green); font-weight: 700;">TANZ! üï∫</div>
                <p style="color: var(--text-secondary); font-size: 1.125rem; margin-top: 12px;">Die Musik kann jeden Moment stoppen!</p>
            `;

            // Play music
            if (danceAudio) {
                danceAudio.currentTime = 0;
                danceAudio.play().catch(e => {
                    console.log('Playback error:', e);
                    // Fallback to generated music
                    playGeneratedMusic();
                });
            } else {
                playGeneratedMusic();
            }

            // Random stop between 5-15 seconds
            const stopTime = 5000 + Math.random() * 10000;
            
            stopDanceTimeout = setTimeout(() => {
                stopMusicAndFreeze();
            }, stopTime);
        }

        // Stop music and show FREEZE
        function stopMusicAndFreeze() {
            if (!isDancing) return;
            
            const status = document.getElementById('dance-status');
            
            // Stop all music
            if (danceAudio) {
                danceAudio.pause();
            }
            
            // Stop generated music
            stopGeneratedMusic();
            
            status.innerHTML = `
                <div style="font-size: 5rem; margin-bottom: 16px; animation: pulse 0.5s ease;">üßä</div>
                <div style="font-size: 2rem; color: var(--halloween-orange); font-weight: 700;">FREEZE!</div>
                <p style="color: var(--text-secondary); font-size: 1.125rem; margin-top: 12px;">Niemand darf sich bewegen!</p>
            `;
            
            // Play stop sound
            playStopSound();
            
            // Keep buttons active for manual restart
            const btn = document.getElementById('dance-start-btn');
            btn.textContent = '‚ñ∂Ô∏è N√§chste Runde!';
            btn.classList.remove('btn-danger');
            isDancing = false;
        }

        // Force stop (manual stop)
        function forceStopMusic() {
            isDancing = false;
            
            if (stopDanceTimeout) {
                clearTimeout(stopDanceTimeout);
                stopDanceTimeout = null;
            }
            
            if (danceAudio) {
                danceAudio.pause();
            }
            
            stopGeneratedMusic();
            
            const btn = document.getElementById('dance-start-btn');
            btn.textContent = '‚ñ∂Ô∏è Musik starten!';
            btn.classList.remove('btn-danger');
            
            const status = document.getElementById('dance-status');
            status.innerHTML = `
                <div style="font-size: 4rem; margin-bottom: 16px;">üéµ</div>
                <p style="color: var(--text-secondary); font-size: 1.125rem;">Klicke auf "Musik starten" um zu beginnen!</p>
            `;
        }

        // Play 8-Bit music based on selected theme
        function playGeneratedMusic() {
            if (currentMusicTheme === 'tetris') {
                playTetrisTheme();
            } else {
                playSuperMarioTheme();
            }
        }

        // Tetris Theme (Korobeiniki) - 8-Bit Version
        function playTetrisTheme() {
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const startTime = audioCtx.currentTime;
                const tempo = 0.3; // Note duration
                
                // Tetris melody notes (simplified version)
                const melody = [
                    659.25, 493.88, 523.25, 587.33, 523.25, 493.88, 440.00, // E4 B3 C4 D4 C4 B3 A3
                    440.00, 523.25, 659.25, 587.33, 523.25, 493.88, // A3 C4 E4 D4 C4 B3
                    493.88, 523.25, 587.33, 659.25, 523.25, 440.00, 440.00, // B3 C4 D4 E4 C4 A3 A3
                    587.33, 698.46, 880.00, 783.99, 698.46, 659.25, // D4 F4 A4 G4 F4 E4
                    523.25, 659.25, 587.33, 523.25, 493.88, 493.88, 523.25, 587.33, 659.25, // C4 E4 D4 C4 B3 B3 C4 D4 E4
                    523.25, 440.00, 440.00 // C4 A3 A3
                ];
                
                // Play melody
                melody.forEach((freq, i) => {
                    const osc = audioCtx.createOscillator();
                    const gain = audioCtx.createGain();
                    
                    osc.connect(gain);
                    gain.connect(audioCtx.destination);
                    
                    osc.frequency.value = freq;
                    osc.type = 'square'; // 8-bit sound
                    
                    const time = startTime + (i * tempo);
                    gain.gain.setValueAtTime(0.15, time);
                    gain.gain.exponentialRampToValueAtTime(0.01, time + tempo * 0.9);
                    
                    osc.start(time);
                    osc.stop(time + tempo);
                    
                    musicOscillators.push({ osc, time: time + tempo });
                });
                
                // Bass line
                const bass = [164.81, 164.81, 164.81, 164.81, 146.83, 146.83, 146.83, 146.83]; // E2, D2
                for (let i = 0; i < 12; i++) {
                    const osc = audioCtx.createOscillator();
                    const gain = audioCtx.createGain();
                    
                    osc.connect(gain);
                    gain.connect(audioCtx.destination);
                    
                    osc.frequency.value = bass[i % bass.length];
                    osc.type = 'triangle';
                    
                    const time = startTime + (i * tempo * 2);
                    gain.gain.setValueAtTime(0.2, time);
                    gain.gain.exponentialRampToValueAtTime(0.01, time + tempo * 1.5);
                    
                    osc.start(time);
                    osc.stop(time + tempo * 1.5);
                    
                    musicOscillators.push({ osc, time: time + tempo * 1.5 });
                }
                
            } catch (e) {
                console.log('Tetris theme failed:', e);
            }
        }

        // Super Mario Bros Theme - 8-Bit Version
        function playSuperMarioTheme() {
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const startTime = audioCtx.currentTime;
                const tempo = 0.15; // Faster tempo for Mario
                
                // Mario Bros main theme (iconic opening)
                const melody = [
                    659.25, 659.25, 0, 659.25, 0, 523.25, 659.25, 0, 783.99, 0, 0, 0, // E5 E5 - E5 - C5 E5 - G5 - - -
                    392.00, 0, 0, 0, // G4 - - -
                    523.25, 0, 392.00, 0, 329.63, 0, 440.00, 0, 493.88, // C5 - G4 - E4 - A4 - B4
                    0, 466.16, 440.00, 0, 392.00, 659.25, 783.99, 880.00, 0, // - A#4 A4 - G4 E5 G5 A5 -
                    698.46, 659.25, 0, 587.33, 523.25, 587.33, 493.88, 0 // F5 E5 - D5 C5 D5 B4 -
                ];
                
                // Play melody
                melody.forEach((freq, i) => {
                    if (freq === 0) return; // Rest
                    
                    const osc = audioCtx.createOscillator();
                    const gain = audioCtx.createGain();
                    
                    osc.connect(gain);
                    gain.connect(audioCtx.destination);
                    
                    osc.frequency.value = freq;
                    osc.type = 'square'; // 8-bit sound
                    
                    const time = startTime + (i * tempo);
                    gain.gain.setValueAtTime(0.15, time);
                    gain.gain.exponentialRampToValueAtTime(0.01, time + tempo * 0.9);
                    
                    osc.start(time);
                    osc.stop(time + tempo);
                    
                    musicOscillators.push({ osc, time: time + tempo });
                });
                
                // Bass/rhythm
                for (let i = 0; i < 20; i++) {
                    const osc = audioCtx.createOscillator();
                    const gain = audioCtx.createGain();
                    
                    osc.connect(gain);
                    gain.connect(audioCtx.destination);
                    
                    osc.frequency.value = 130.81; // C3
                    osc.type = 'triangle';
                    
                    const time = startTime + (i * tempo * 2);
                    gain.gain.setValueAtTime(0.15, time);
                    gain.gain.exponentialRampToValueAtTime(0.01, time + tempo);
                    
                    osc.start(time);
                    osc.stop(time + tempo);
                    
                    musicOscillators.push({ osc, time: time + tempo });
                }
                
            } catch (e) {
                console.log('Mario theme failed:', e);
            }
        }

        // Stop generated music
        function stopGeneratedMusic() {
            musicOscillators.forEach(item => {
                try {
                    if (item.osc.stop) {
                        item.osc.stop(0);
                    }
                } catch (e) {
                    // Already stopped
                }
            });
            musicOscillators = [];
        }

        // Play stop sound
        function playStopSound() {
            try {
                const ctx = new (window.AudioContext || window.webkitAudioContext)();
                const osc = ctx.createOscillator();
                const gain = ctx.createGain();
                
                osc.connect(gain);
                gain.connect(ctx.destination);
                
                osc.frequency.value = 150;
                osc.type = 'sawtooth';
                gain.gain.setValueAtTime(0.3, ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.8);
                
                osc.start(ctx.currentTime);
                osc.stop(ctx.currentTime + 0.8);
            } catch (e) {
                console.log('Stop sound failed:', e);
            }
        }

        /* ============================================
           GAME 6: SIMON SAGT
           ============================================ */
        
        let simonMode = true; // true = with "Simon sagt", false = without

        const simonCommands = [
            { emoji: 'üôå', text: 'Hebe deine H√§nde!' },
            { emoji: 'üëè', text: 'Klatsche dreimal!' },
            { emoji: 'ü¶ò', text: 'H√ºpfe auf einem Bein!' },
            { emoji: 'üëÉ', text: 'Ber√ºhre deine Nase!' },
            { emoji: 'üëÇ', text: 'Ber√ºhre dein Ohr!' },
            { emoji: 'üåÄ', text: 'Dreh dich im Kreis!' },
            { emoji: 'üê∏', text: 'Spring wie ein Frosch!' },
            { emoji: '‚≠ê', text: 'Mach dich ganz gro√ü!' },
            { emoji: 'üé≠', text: 'Mach ein lustiges Gesicht!' },
            { emoji: 'üëã', text: 'Winke mit beiden H√§nden!' },
            { emoji: 'ü¶∂', text: 'Stehe auf einem Bein!' },
            { emoji: 'üí™', text: 'Zeig deine Muskeln!' }
        ];

        function generateSimonCommand() {
            const display = document.getElementById('simon-command-display');
            const command = simonCommands[Math.floor(Math.random() * simonCommands.length)];
            const withSimon = simonMode ? Math.random() > 0.3 : false; // 70% with "Simon sagt" in normal mode
            
            const prefix = withSimon ? 
                '<div style="color: var(--halloween-green); font-size: 1.5rem; font-weight: 700; margin-bottom: 16px;">‚úÖ Simon sagt...</div>' :
                '<div style="color: var(--halloween-orange); font-size: 1.5rem; font-weight: 700; margin-bottom: 16px;">‚ö†Ô∏è Ohne "Simon sagt"!</div>';
            
            display.innerHTML = `
                ${prefix}
                <div style="font-size: 5rem; margin-bottom: 16px; animation: bounce 0.5s ease;">${command.emoji}</div>
                <div style="font-size: 2rem; color: var(--text-primary); font-weight: 700;">${command.text}</div>
                <p style="color: var(--text-secondary); font-size: 1rem; margin-top: 16px;">
                    ${withSimon ? 'üëâ Ihr M√úSST es machen!' : 'üëâ Ihr d√ºrft es NICHT machen!'}
                </p>
            `;

            display.classList.add('bounce');
            setTimeout(() => display.classList.remove('bounce'), 500);
        }

        function toggleSimonMode() {
            simonMode = !simonMode;
            const btn = document.getElementById('simon-mode-btn');
            btn.textContent = simonMode ? 
                'Modus: Normal (mit "Simon sagt")' : 
                'Modus: Nur Befehle (ohne "Simon sagt")';
        }

        /* ============================================
           GAME 7: EMOJI-FANGEN
           ============================================ */
        
        let emojiGameActive = false;
        let emojiGameTimer = null;
        let emojiSpawnTimer = null;
        let emojiScore = 0;
        let emojiRound = 0;
        let emojiTimeLeft = 30;
        let currentTargetEmoji = 'üéÉ';

        const emojiList = ['üéÉ', 'üëª', 'üï∑Ô∏è', 'ü¶á', 'üç¨', '‚≠ê', 'üíÄ', 'üï∏Ô∏è', 'üßô', 'üßπ'];

        function startEmojiGame() {
            if (emojiGameActive) return;
            
            emojiGameActive = true;
            emojiScore = 0;
            emojiRound = 0;
            emojiTimeLeft = 30;
            
            currentTargetEmoji = emojiList[Math.floor(Math.random() * emojiList.length)];
            
            document.getElementById('emoji-target').textContent = currentTargetEmoji;
            document.getElementById('emoji-score').textContent = emojiScore;
            document.getElementById('emoji-round').textContent = emojiRound;
            document.getElementById('emoji-time').textContent = emojiTimeLeft;
            document.getElementById('emoji-start-btn').textContent = 'üéÆ Spiel l√§uft...';
            document.getElementById('emoji-start-btn').disabled = true;
            
            // Timer countdown
            emojiGameTimer = setInterval(() => {
                emojiTimeLeft--;
                document.getElementById('emoji-time').textContent = emojiTimeLeft;
                
                if (emojiTimeLeft <= 0) {
                    endEmojiGame();
                }
            }, 1000);
            
            // Spawn emojis
            spawnEmoji();
            emojiSpawnTimer = setInterval(spawnEmoji, 800);
        }

        function spawnEmoji() {
            const area = document.getElementById('emoji-game-area');
            const emoji = document.createElement('div');
            
            // 50% chance it's the target emoji
            const isTarget = Math.random() > 0.5;
            const emojiChar = isTarget ? currentTargetEmoji : emojiList[Math.floor(Math.random() * emojiList.length)];
            
            emoji.textContent = emojiChar;
            emoji.style.position = 'absolute';
            emoji.style.fontSize = '3rem';
            emoji.style.cursor = 'pointer';
            emoji.style.left = Math.random() * (area.offsetWidth - 60) + 'px';
            emoji.style.top = Math.random() * (area.offsetHeight - 60) + 'px';
            emoji.style.transition = 'all 0.3s ease';
            emoji.style.userSelect = 'none';
            
            emoji.onclick = () => {
                if (emojiChar === currentTargetEmoji) {
                    emojiScore++;
                    emojiRound++;
                    document.getElementById('emoji-score').textContent = emojiScore;
                    document.getElementById('emoji-round').textContent = emojiRound;
                    emoji.style.transform = 'scale(1.5) rotate(360deg)';
                    emoji.style.opacity = '0';
                    
                    // Award points to all players
                    players.forEach(p => p.score++);
                    savePlayers();
                } else {
                    emoji.style.transform = 'scale(0.5)';
                    emoji.style.opacity = '0.5';
                }
                
                setTimeout(() => emoji.remove(), 300);
            };
            
            area.appendChild(emoji);
            
            // Auto remove after 2 seconds
            setTimeout(() => {
                if (emoji.parentNode) {
                    emoji.style.opacity = '0';
                    setTimeout(() => emoji.remove(), 300);
                }
            }, 2000);
        }

        function endEmojiGame() {
            emojiGameActive = false;
            clearInterval(emojiGameTimer);
            clearInterval(emojiSpawnTimer);
            
            document.getElementById('emoji-game-area').innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                    <div style="font-size: 4rem; margin-bottom: 16px;">üéâ</div>
                    <div style="font-size: 2rem; color: var(--halloween-orange); font-weight: 700;">Spiel vorbei!</div>
                    <div style="font-size: 1.5rem; color: var(--text-primary); margin-top: 12px;">Punkte: ${emojiScore}</div>
                </div>
            `;
            
            document.getElementById('emoji-start-btn').textContent = 'üöÄ Nochmal spielen!';
            document.getElementById('emoji-start-btn').disabled = false;
        }

        /* ============================================
           GAME 8: TANZ-CHALLENGE
           ============================================ */
        
        let danceChallengeActive = false;
        let danceChallengeInterval = null;
        let danceRoundTimer = null;

        const danceMoves = [
            { emoji: 'üôå', name: 'H√§nde hoch!', desc: 'Streckt die Arme in die Luft!' },
            { emoji: 'üåÄ', name: 'Pirouette!', desc: 'Dreht euch einmal im Kreis!' },
            { emoji: 'ü¶ò', name: 'H√ºpfen!', desc: 'H√ºpft auf und ab!' },
            { emoji: 'üëè', name: 'Klatschen!', desc: 'Klatscht im Rhythmus!' },
            { emoji: 'üêç', name: 'Die Schlange!', desc: 'Bewegt euch wellenf√∂rmig!' },
            { emoji: '‚≠ê', name: 'Stern!', desc: 'Macht einen Stern mit dem K√∂rper!' },
            { emoji: 'ü¶ñ', name: 'Dinosaurier!', desc: 'Stampft wie ein Dino!' },
            { emoji: 'ü¶Ö', name: 'Vogel!', desc: 'Flattert mit den Armen!' },
            { emoji: 'ü§∏', name: 'Rad schlagen!', desc: 'Macht eine Rolle vorw√§rts!' },
            { emoji: 'üßò', name: 'Yoga-Pose!', desc: 'Macht eine Baum-Pose!' },
            { emoji: 'üèÉ', name: 'Laufen!', desc: 'Lauft auf der Stelle!' },
            { emoji: 'ü§©', name: 'Superstar!', desc: 'Macht eine Star-Pose!' }
        ];

        function startDanceChallenge() {
            if (danceChallengeActive) {
                stopDanceChallenge();
                return;
            }

            danceChallengeActive = true;
            const btn = document.getElementById('dance-challenge-btn');
            const hardMode = document.getElementById('dance-mode-toggle').checked;
            const moveTime = hardMode ? 5 : 8; // seconds per move
            
            btn.textContent = '‚èπÔ∏è Challenge stoppen';
            btn.classList.add('btn-danger');
            
            showNextDanceMove(moveTime);
        }

        function showNextDanceMove(moveTime) {
            if (!danceChallengeActive) return;
            
            const move = danceMoves[Math.floor(Math.random() * danceMoves.length)];
            
            document.getElementById('dance-emoji').textContent = move.emoji;
            document.getElementById('dance-move-name').textContent = move.name;
            document.getElementById('dance-move-desc').textContent = move.desc;
            
            // Award stars to all players
            players.forEach(p => p.score++);
            savePlayers();
            
            // Countdown
            let timeLeft = moveTime;
            document.getElementById('dance-timer').textContent = `‚è±Ô∏è ${timeLeft}s`;
            
            danceRoundTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('dance-timer').textContent = `‚è±Ô∏è ${timeLeft}s`;
                
                if (timeLeft <= 0) {
                    clearInterval(danceRoundTimer);
                    if (danceChallengeActive) {
                        showNextDanceMove(moveTime);
                    }
                }
            }, 1000);
        }

        function stopDanceChallenge() {
            danceChallengeActive = false;
            clearInterval(danceRoundTimer);
            
            const btn = document.getElementById('dance-challenge-btn');
            btn.textContent = 'üéµ Challenge starten!';
            btn.classList.remove('btn-danger');
            
            document.getElementById('dance-emoji').textContent = 'üï∫';
            document.getElementById('dance-move-name').textContent = 'Bereit?';
            document.getElementById('dance-move-desc').textContent = 'Klicke auf "Challenge starten" um zu beginnen!';
            document.getElementById('dance-timer').textContent = '';
        }

        /* ============================================
           GAME 9: SCHATZSUCHE
           ============================================ */
        
        let treasureClues = [
            { emoji: 'üõãÔ∏è', text: 'Wo sitzt man gem√ºtlich und schaut fern?', hint: 'Sofa/Couch' },
            { emoji: 'üö™', text: 'Schau hinter das Ding, wo man rein und raus geht!', hint: 'T√ºr' },
            { emoji: '‚ùÑÔ∏è', text: 'Wo bleiben Lebensmittel kalt und frisch?', hint: 'K√ºhlschrank' },
            { emoji: 'üå≥', text: 'Drau√üen steht etwas Gro√ües mit Bl√§ttern oder √Ñsten!', hint: 'Baum' },
            { emoji: 'üìö', text: 'Wo stehen viele B√ºcher in einer Reihe?', hint: 'B√ºcherregal' },
            { emoji: 'üõèÔ∏è', text: 'Wo schl√§fst du jede Nacht?', hint: 'Bett' },
            { emoji: 'üöó', text: 'Wo parkt das Auto?', hint: 'Garage/Parkplatz' },
            { emoji: 'üåª', text: 'Schau in den Garten bei den Pflanzen!', hint: 'Garten' }
        ];
        
        let currentClueIndex = 0;
        let usedClues = [];

        function showNextClue() {
            // Reset if finished
            if (currentClueIndex >= 5) {
                currentClueIndex = 0;
                usedClues = [];
                document.getElementById('treasure-clue-display').innerHTML = `
                    <div style="font-size: 5rem; margin-bottom: 16px; animation: bounce 0.5s ease;">üéâ</div>
                    <div style="font-size: 2rem; color: var(--halloween-orange); font-weight: 700; margin-bottom: 16px;">Schatzsuche beendet!</div>
                    <p style="color: var(--text-primary); font-size: 1.25rem;">Ihr habt alle Hinweise gefunden! Toll gemacht! üèÜ</p>
                `;
                
                // Award stars
                players.forEach(p => p.score += 3);
                savePlayers();
                return;
            }

            // Get random unused clue
            let availableClues = treasureClues.filter((_, i) => !usedClues.includes(i));
            let clue = availableClues[Math.floor(Math.random() * availableClues.length)];
            let clueIndex = treasureClues.indexOf(clue);
            usedClues.push(clueIndex);
            
            currentClueIndex++;
            document.getElementById('treasure-clue-num').textContent = currentClueIndex;
            document.getElementById('treasure-total').textContent = '5';
            
            document.getElementById('treasure-clue-display').innerHTML = `
                <div style="font-size: 6rem; margin-bottom: 24px; animation: bounce 0.5s ease;">${clue.emoji}</div>
                <div style="font-size: 1.75rem; color: var(--halloween-orange); font-weight: 700; margin-bottom: 16px; text-align: center; padding: 0 20px;">
                    ${clue.text}
                </div>
                <p style="color: var(--text-secondary); font-size: 1rem; font-style: italic;">
                    üí° Tipp: ${clue.hint}
                </p>
            `;
        }

        /* ============================================
           GAME 10: HALLOWEEN BINGO
           ============================================ */
        
        const bingoItems = [
            { emoji: 'üéÉ', text: 'K√ºrbis' },
            { emoji: 'üëª', text: 'Geist' },
            { emoji: 'üï∑Ô∏è', text: 'Spinne' },
            { emoji: 'ü¶á', text: 'Fledermaus' },
            { emoji: 'üï∏Ô∏è', text: 'Spinnennetz' },
            { emoji: 'üßô', text: 'Hexe' },
            { emoji: 'üßõ', text: 'Vampir' },
            { emoji: 'üßü', text: 'Zombie' },
            { emoji: 'üíÄ', text: 'Skelett' },
            { emoji: 'üç¨', text: 'S√º√üigkeit' },
            { emoji: 'üåô', text: 'Mond' },
            { emoji: '‚≠ê', text: 'Stern' },
            { emoji: 'üïØÔ∏è', text: 'Kerze' },
            { emoji: 'üèöÔ∏è', text: 'Altes Haus' },
            { emoji: 'üåë', text: 'Dunkelheit' },
            { emoji: 'üîÆ', text: 'Kristallkugel' }
        ];

        let bingoGrid = [];
        let bingoFoundCount = 0;

        function initBingo() {
            // Shuffle items
            const shuffled = [...bingoItems].sort(() => Math.random() - 0.5);
            bingoGrid = shuffled.slice(0, 16).map((item, i) => ({
                ...item,
                id: i,
                found: false
            }));
            
            renderBingoGrid();
        }

        function renderBingoGrid() {
            const grid = document.getElementById('bingo-grid');
            grid.innerHTML = bingoGrid.map(item => `
                <div 
                    class="bingo-card ${item.found ? 'bingo-found' : ''}" 
                    onclick="toggleBingoItem(${item.id})"
                    style="
                        background: var(--bg-elevated);
                        border: 2px solid ${item.found ? 'var(--halloween-green)' : 'var(--bg-tertiary)'};
                        border-radius: 12px;
                        padding: 20px;
                        text-align: center;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        opacity: ${item.found ? '0.6' : '1'};
                    "
                >
                    <div style="font-size: 3rem; margin-bottom: 8px;">${item.emoji}</div>
                    <div style="font-size: 0.875rem; color: var(--text-primary); font-weight: 600;">${item.text}</div>
                    ${item.found ? '<div style="font-size: 2rem; margin-top: 8px;">‚úÖ</div>' : ''}
                </div>
            `).join('');
            
            updateBingoCount();
        }

        function toggleBingoItem(id) {
            const item = bingoGrid.find(i => i.id === id);
            if (!item) return;
            
            item.found = !item.found;
            
            if (item.found) {
                bingoFoundCount++;
                playWinSound();
            } else {
                bingoFoundCount--;
            }
            
            renderBingoGrid();
            checkBingoWin();
        }

        function updateBingoCount() {
            document.getElementById('bingo-found').textContent = bingoFoundCount;
        }

        function checkBingoWin() {
            // Check rows
            for (let row = 0; row < 4; row++) {
                const rowItems = bingoGrid.slice(row * 4, (row + 1) * 4);
                if (rowItems.every(item => item.found)) {
                    showBingoWin('Horizontale Reihe!');
                    return;
                }
            }
            
            // Check columns
            for (let col = 0; col < 4; col++) {
                const colItems = [0, 1, 2, 3].map(row => bingoGrid[row * 4 + col]);
                if (colItems.every(item => item.found)) {
                    showBingoWin('Vertikale Reihe!');
                    return;
                }
            }
            
            // Check diagonals
            const diag1 = [0, 5, 10, 15].map(i => bingoGrid[i]);
            if (diag1.every(item => item.found)) {
                showBingoWin('Diagonale!');
                return;
            }
            
            const diag2 = [3, 6, 9, 12].map(i => bingoGrid[i]);
            if (diag2.every(item => item.found)) {
                showBingoWin('Diagonale!');
                return;
            }
        }

        function showBingoWin(type) {
            showToast(`üéâ BINGO! ${type} gewonnen!`);
            players.forEach(p => p.score += 5);
            savePlayers();
        }

        function resetBingo() {
            bingoFoundCount = 0;
            initBingo();
        }

        // Initialize bingo when entering the game
        function initBingoIfNeeded() {
            const grid = document.getElementById('bingo-grid');
            if (grid && grid.innerHTML === '') {
                initBingo();
            }
        }

        // Override showGame to initialize bingo when needed
        const originalShowGame = showGame;
        showGame = function(gameId) {
            originalShowGame(gameId);
            if (gameId === 'bingo') {
                setTimeout(initBingoIfNeeded, 100);
            }
        };

        /* ============================================
           GAME 11: AMPEL-SPIEL
           ============================================ */
        
        let trafficLightActive = false;
        let trafficLightInterval = null;

        function startTrafficLight() {
            if (trafficLightActive) {
                stopTrafficLight();
                return;
            }

            trafficLightActive = true;
            const btn = document.getElementById('traffic-btn');
            btn.textContent = '‚èπÔ∏è Spiel stoppen';
            btn.classList.add('btn-danger');

            runTrafficLightCycle();
        }

        function runTrafficLightCycle() {
            if (!trafficLightActive) return;

            const display = document.getElementById('traffic-light-display');
            
            // Green light - GO!
            display.style.background = 'rgba(50, 215, 75, 0.3)';
            display.innerHTML = `
                <div style="font-size: 10rem; margin-bottom: 16px;">üü¢</div>
                <div style="font-size: 3rem; color: var(--halloween-green); font-weight: 800;">LAUFT!</div>
            `;

            // Random time 3-8 seconds
            const greenTime = 3000 + Math.random() * 5000;

            setTimeout(() => {
                if (!trafficLightActive) return;

                // Red light - STOP!
                display.style.background = 'rgba(255, 69, 58, 0.3)';
                display.innerHTML = `
                    <div style="font-size: 10rem; margin-bottom: 16px;">üî¥</div>
                    <div style="font-size: 3rem; color: #ff453a; font-weight: 800;">STOPP!</div>
                `;

                // Play stop sound
                playStopSound();

                // Random stop time 2-5 seconds
                const redTime = 2000 + Math.random() * 3000;

                setTimeout(() => {
                    if (trafficLightActive) {
                        runTrafficLightCycle();
                    }
                }, redTime);

            }, greenTime);
        }

        function stopTrafficLight() {
            trafficLightActive = false;
            const btn = document.getElementById('traffic-btn');
            btn.textContent = 'üö¶ Spiel starten!';
            btn.classList.remove('btn-danger');

            const display = document.getElementById('traffic-light-display');
            display.style.background = 'transparent';
            display.innerHTML = `
                <div style="font-size: 8rem; margin-bottom: 16px;">üéÉ</div>
                <p style="font-size: 1.5rem; color: var(--text-secondary);">Klicke auf "Spiel starten"!</p>
            `;
        }

        /* ============================================
           GAME 12: VERKLEIDUNGS-CHALLENGE
           ============================================ */
        
        let costumeTimer = null;
        let costumeTimeLeft = 0;

        const costumeTasks = [
            { emoji: 'üßô', task: 'Hexe', desc: 'Zieh dir einen Hexenhut und einen schwarzen Umhang an!' },
            { emoji: 'üëª', task: 'Geist', desc: 'Wirf ein wei√ües Bettlaken √ºber dich!' },
            { emoji: 'üßõ', task: 'Vampir', desc: 'Zieh einen schwarzen Mantel an und male dir Vampirz√§hne!' },
            { emoji: 'üéÉ', task: 'K√ºrbis', desc: 'Zieh Orange an und male dir ein K√ºrbisgesicht!' },
            { emoji: 'ü¶á', task: 'Fledermaus', desc: 'Zieh etwas Schwarzes an und breite deine Arme aus!' },
            { emoji: 'üíÄ', task: 'Skelett', desc: 'Zieh wei√üe und schwarze Sachen an!' },
            { emoji: 'üêà‚Äç‚¨õ', task: 'Schwarze Katze', desc: 'Zieh etwas Schwarzes an und male dir Schnurrhaare!' },
            { emoji: 'üßü', task: 'Zombie', desc: 'Zerrei√ü alte Klamotten und mach Zombie-Ger√§usche!' }
        ];

        function startCostumeChallenge() {
            const time = parseInt(document.getElementById('costume-time-input').value) || 60;
            costumeTimeLeft = time;

            const task = costumeTasks[Math.floor(Math.random() * costumeTasks.length)];
            
            document.getElementById('costume-emoji').textContent = task.emoji;
            document.getElementById('costume-task').textContent = `Verkleidet euch als ${task.task}!`;
            document.getElementById('costume-desc').textContent = task.desc;

            const btn = document.getElementById('costume-challenge-btn');
            btn.textContent = '‚è±Ô∏è L√§uft...';
            btn.disabled = true;

            costumeTimer = setInterval(() => {
                costumeTimeLeft--;
                document.getElementById('costume-timer-display').textContent = `‚è±Ô∏è ${costumeTimeLeft}s`;

                if (costumeTimeLeft <= 0) {
                    clearInterval(costumeTimer);
                    document.getElementById('costume-timer-display').innerHTML = `
                        <div style="font-size: 4rem; color: var(--halloween-orange);">‚è∞ ZEIT UM!</div>
                    `;
                    btn.textContent = 'üé¨ Nochmal!';
                    btn.disabled = false;

                    // Award stars to all players
                    players.forEach(p => p.score++);
                    savePlayers();
                }
            }, 1000);

            document.getElementById('costume-timer-display').textContent = `‚è±Ô∏è ${costumeTimeLeft}s`;
        }

        /* ============================================
           INITIALIZATION
           ============================================ */
        
        // Load scoreboard on start
        updateScoreboard();

        /* ============================================
           HALLOWEEN PARTICLES - AMBIENT ANIMATION
           ============================================ */
        function createHalloweenParticles() {
            const container = document.getElementById('halloween-particles');
            if (!container) return;
            
            const particles = ['üéÉ', 'üëª', 'üï∑Ô∏è', 'ü¶á', 'üï∏Ô∏è', 'üç¨', '‚≠ê'];
            const particleCount = 15;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.textContent = particles[Math.floor(Math.random() * particles.length)];
                particle.style.position = 'absolute';
                particle.style.fontSize = `${Math.random() * 20 + 20}px`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.top = `${Math.random() * 100}%`;
                particle.style.opacity = '0.2';
                particle.style.animation = `float ${Math.random() * 10 + 10}s ease-in-out infinite`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                container.appendChild(particle);
            }
        }

        // Initialize particles
        createHalloweenParticles();
    </script>
</body>
</html>

